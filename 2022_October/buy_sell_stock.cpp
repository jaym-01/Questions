#include <algorithm>
#include <iostream>
#include <vector>

using namespace std;

#define change if(*largest - *smallest > max) max = *largest - *smallest

class Solution
{
public:
    int maxProfit(vector<int> &prices)
    {
        int max = 0, tmp;
        vector<int>::iterator largest, smallest;

        for (int i = 0; i < prices.size() - 1; i++)
        {
            if(i == 0 || prices[i] < *smallest){
                smallest = prices.begin() + i;
                if(i != 0) change;
            }

            if (i == 0 || prices.begin() + i >= largest)
            {
                largest = max_element(prices.begin() + i + 1, prices.end());
                if(*largest <= max) return max;
                change;
            }

            
        }

        return max;
    }
};

int main()
{
    Solution s;

    // 998
    vector<int> t1 = {841, 372, 337, 894, 371, 377, 595, 781, 895, 765, 723, 570, 408, 94, 400, 685, 167, 875, 867, 526, 113, 498, 659, 469, 158, 354, 306, 199, 412, 366, 41, 350, 904, 258, 673, 156, 584, 666, 43, 409, 663, 782, 860, 835, 942, 813, 726, 6, 112, 417, 204, 718, 159, 667, 619, 21, 929, 755, 268, 721, 393, 474, 388, 326, 874, 632, 128, 425, 52, 296, 615, 612, 713, 820, 368, 219, 288, 617, 543, 441, 305, 228, 571, 524, 585, 530, 427, 889, 515, 676, 255, 941, 709, 344, 836, 991, 767, 73, 472, 207, 173, 917, 592, 955, 989, 655, 493, 747, 458, 223, 671, 690, 793, 276, 359, 564, 538, 225, 914, 931, 438, 363, 613, 357, 184, 23, 262, 884, 30, 679, 900, 274, 734, 25, 757, 249, 854, 46, 460, 395, 714, 556, 921, 188, 99, 380, 311, 909, 963, 890, 147, 868, 705, 606, 205, 312, 838, 583, 351, 694, 59, 246, 725, 82, 89, 638, 58, 913, 971, 208, 980, 334, 282, 192, 324, 656, 298, 682, 839, 480, 849, 329, 702, 681, 240, 746, 748, 98, 569, 957, 251, 812, 97, 951, 387, 848, 484, 247, 353, 342, 180, 683, 772, 912, 737, 289, 828, 609, 218, 315, 892, 652, 318, 871, 92, 593, 437, 206, 456, 222, 545, 817, 47, 969, 275, 760, 553, 646, 565, 741, 928, 444, 675, 24, 90, 432, 133, 78, 321, 283, 111, 292, 623, 552, 482, 38, 157, 244, 299, 27, 735, 477, 990, 539, 340, 943, 396, 815, 301, 724, 478, 940, 345, 195, 597, 857, 234, 248, 485, 476, 801, 356, 661, 899, 707, 634, 83, 410, 771, 834, 736, 672, 581, 70, 997, 826, 508, 331, 901, 586, 898, 717, 797, 355, 143, 962, 496, 32, 100, 577, 468, 245, 341, 701, 776, 822, 763, 937, 697, 230, 879, 256, 382, 123, 37, 203, 572, 787, 35, 640, 18, 588, 66, 731, 170, 176, 339, 373, 361, 65, 15, 465, 693, 803, 784, 390, 798, 933, 11, 214, 605, 567, 758, 620, 150, 517, 217, 49, 232, 740, 783, 352, 12, 594, 840, 253, 392, 799, 325, 399, 859, 596, 587, 475, 919, 140, 265, 906, 993, 846, 116, 961, 818, 459, 95, 789, 630, 347, 169, 40, 883, 198, 381, 365, 616, 153, 708, 590, 910, 965, 13, 401, 250, 346, 28, 144, 680, 576, 729, 804, 695, 421, 166, 17, 639, 749, 194, 732, 996, 670, 915, 490, 293, 369, 102, 720, 193, 878, 934, 273, 532, 932, 633, 832, 165, 858, 238, 81, 235, 146, 237, 69, 842, 505, 651, 56, 506, 520, 335, 958, 486, 677, 621, 626, 386, 407, 533, 55, 185, 370, 309, 780, 918, 887, 67, 535, 426, 727, 497, 805, 19, 510, 983, 487, 431, 202, 949, 33, 4, 988, 511, 519, 527, 796, 935, 978, 323, 504, 911, 103, 970, 451, 136, 733, 930, 994, 684, 5, 378, 744, 557, 385, 127, 452, 215, 291, 946, 360, 135, 216, 110, 712, 287, 770, 336, 131, 29, 503, 945, 688, 20, 775, 759, 886, 806, 233, 560, 920, 548, 263, 568, 691, 872, 618, 897, 598, 625, 96, 753, 873, 773, 903, 243, 689, 540, 327, 995, 922, 985, 607, 439, 809, 471, 802, 118, 668, 39, 358, 51, 973, 338, 905, 413, 865, 637, 404, 658, 155, 645, 93, 964, 611, 880, 537, 660, 295, 294, 975, 800, 174, 209, 885, 877, 284, 602, 774, 824, 893, 447, 604, 179, 473, 578, 528, 976, 738, 827, 462, 266, 479, 151, 242, 622, 236, 422, 224, 440, 629, 642, 791, 313, 636, 810, 457, 80, 563, 635, 580, 483, 391, 575, 984, 831, 541, 31, 109, 722, 851, 599, 833, 743, 280, 516, 710, 981, 367, 3, 106, 333, 696, 254, 843, 433, 558, 788, 450, 876, 415, 853, 177, 678, 751, 9, 862, 54, 443, 411, 999, 644, 554, 502, 129, 91, 494, 549, 125, 87, 716, 168, 36, 514, 448, 500, 446, 137, 525, 601, 974, 591, 627, 464, 654, 513, 126, 522, 992, 938, 394, 424, 790, 104, 145, 349, 449, 259, 8, 856, 181, 972, 600, 902, 566, 649, 402, 674, 2, 50, 201, 896, 414, 77, 117, 454, 120, 491, 270, 664, 241, 88, 226, 434, 662, 699, 389, 489, 430, 881, 163, 752, 108, 161, 114, 845, 332, 132, 141, 550, 551, 574, 534, 936, 416, 429, 76, 754, 227, 398, 107, 330, 692, 795, 297, 512, 124, 164, 939, 42, 518, 264, 954, 742, 53, 285, 814, 149, 364, 546, 891, 719, 10, 183, 986, 200, 172, 823, 544, 761, 521, 22, 766, 175, 197, 189, 657, 768, 641, 562, 171, 982, 302, 952, 470, 290, 316, 700, 647, 1000, 101, 152, 531, 62, 122, 269, 75, 57, 863, 821, 703, 190, 501, 328, 643, 830, 26, 523, 953, 816, 785, 987, 467, 14, 728, 44, 374, 383, 119, 142, 314, 16, 686, 916, 589, 850, 807, 579, 704, 34, 947, 348, 866, 648, 210, 403, 79, 481, 665, 614, 130, 861, 698, 186, 182, 628, 7, 756, 322, 923, 68, 925, 786, 870, 927, 715, 196, 278, 547, 229, 86, 64, 888, 257, 461, 529, 977, 608, 286, 811, 419, 769, 711, 60, 869, 573, 105, 559, 509, 603, 745, 844, 239, 706, 950, 48, 582, 968, 631, 778, 160, 71, 499, 220, 960, 435, 423, 45, 792, 319, 739, 221, 85, 455, 750, 303, 115, 536, 260, 669, 561, 653, 762, 555, 825, 453, 819, 187, 384, 492, 542, 300, 855, 445, 271, 777, 379, 148, 191, 63, 304, 907, 154, 211, 267, 1, 837, 281, 948, 852, 178, 495, 406, 959, 343, 405, 279, 998, 687, 436, 624, 376, 610, 61, 375, 507, 882, 418, 966, 74, 231, 829, 317, 924, 307, 779, 730, 466, 261, 138, 428, 808, 308, 442, 944, 134, 121, 320, 139, 956, 162, 397, 310, 650, 420, 213, 908, 979, 794, 847, 72, 277, 967, 362, 84, 926, 463, 864, 252, 488, 212, 764, 272};
    vector<int> t2 = {1, 2, 3, 4, 5};
    cout << s.maxProfit(t2) << endl;
}